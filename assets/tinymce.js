tinymce.PluginManager.add("themifyMenu",(function(e,t){"use strict";function o(t){return{text:t.label,body:{type:t.id},onclick(){if(jQuery.isEmptyObject(t.fields)){var o={};o.selectedContent=e.selection.getContent();var i=wp.template("themify-shortcode-"+t.id);e.insertContent(i(o))}else{var n=[];jQuery.each(t.fields,(function(t,o){if("colorbox"==o.type)o.onaction=function(){var t=e.settings.color_picker_callback;if(t)return function(){var o=this;t.call(e,(e=>{o.value(e).fire("change")}),o.value())}}();else if("image"==o.type)o={type:"container",label:o.label,layout:"flex",direction:"row",items:[{type:"textbox",name:o.name},{type:"button",text:o.text,onclick(){var e=jQuery(this.$el),t=wp.media.frames.file_frame=wp.media({multiple:!1});t.on("select",(()=>{var o=t.state().get("selection").first().toJSON();e.prev().val(o.url)})),t.open()}}]};else if("iconpicker"==o.type){let e={type:"container",label:o.label,layout:"flex",direction:"row",items:[{type:"textbox",name:o.name}]},t=window.Themify_Icons;document.getElementById("tb_iframe")&&!t&&(t=document.getElementById("tb_iframe").contentWindow.Themify_Icons),t&&e.items.push({type:"button",text:o.text,onclick(){var e=jQuery(this.$el);e.hasClass("themify_fa_toggle")||e.addClass("themify_fa_toggle"),t.target=e.prev()}}),o=e}n.push(o)})),e.windowManager.open({title:t.label,body:n,autoScroll:!0,maxHeight:700,maxWidth:550,classes:"themify_shortcodes_panel",onSubmit(o){var i=this.toJSON();i.selectedContent=e.selection.getContent();var n=wp.template("themify-shortcode-"+t.id);e.insertContent(n(i))}})}}}}var i=[];jQuery.each(themifyEditor.shortcodes,((e,t)=>{if(t.id=e,"object"==typeof t.menu){var n=[];jQuery.each(t.menu,((e,t)=>{t.id=e,n.push(o(t))})),i.push({text:t.label,menu:n})}else i.push(o(t))})),e.addButton("btnthemifyMenu",{type:"menubutton",text:"",image:themifyEditor.editor.icon,tooltip:themifyEditor.editor.menuTooltip,menu:i});const n=document.createElement("style");n.type="text/css",n.innerText=".mce-window.mce-container.mce-themify_shortcodes_panel .mce-container-body.mce-abs-layout {  overflow: hidden; }",document.head.appendChild(n)}));